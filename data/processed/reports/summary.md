# Отчёт по проекту: от мотивации к паттернам цифрового мышления

## 1. Модели для `final_result` (завершение курса)

**Валидация (лучшее по PR-AUC):**

| name   |   roc_auc |   pr_auc |    brier |   thr_bestF1 |   f1_best |
|:-------|----------:|---------:|---------:|-------------:|----------:|
| GBDT   |  0.899119 | 0.926661 | 0.123245 |          0.4 |  0.861824 |
| MLP    |  0.830341 | 0.871378 | 0.18924  |          0.2 |  0.820555 |

**Тест (модель-победитель на валидации):**

| name   |   roc_auc |   pr_auc |    brier |   thr_bestF1 |   f1_at_bestF1 |
|:-------|----------:|---------:|---------:|-------------:|---------------:|
| GBDT   |  0.899119 | 0.926661 | 0.123245 |          0.4 |       0.861824 |
| MLP    |  0.830341 | 0.871378 | 0.18924  |          0.2 |       0.820555 |

## 2. Политика порога (recall ≥ 0.80)

| model   | status   |      thr |   val_recall_target |   test_precision |   test_f1 |   test_brier |
|:--------|:---------|---------:|--------------------:|-----------------:|----------:|-------------:|
| GBDT    | ok       | 0.609818 |                 0.8 |         0.864454 |  0.831035 |     0.127531 |

См. матрицы ошибок: `models_final/policy_recall80/confusion_val.csv`, `.../confusion_test.csv`.


## 3. Робастность

**Сценарии и PR-AUC на валидации:**

|   base_roc_auc |   base_pr_auc |   robust_roc_auc |   robust_pr_auc |
|---------------:|--------------:|-----------------:|----------------:|
|       0.892966 |      0.923115 |         0.890725 |        0.921747 |

**Ablation — падение PR-AUC при удалении признака (топ-20):**

| feature              |   roc_auc |   pr_auc |    delta_roc |     delta_pr |
|:---------------------|----------:|---------:|-------------:|-------------:|
| score_gain_rate      |  0.859344 | 0.894679 |  0.0336216   |  0.0284365   |
| active_days          |  0.870159 | 0.900828 |  0.0228063   |  0.0222867   |
| regularity_cv        |  0.884291 | 0.916583 |  0.0086749   |  0.00653191  |
| self_initiation_rate |  0.889574 | 0.92132  |  0.00339146  |  0.00179535  |
| route_entropy        |  0.888063 | 0.921468 |  0.00490287  |  0.00164701  |
| social_evenness      |  0.892892 | 0.923151 |  7.41565e-05 | -3.60449e-05 |
| deep_session_share   |  0.893603 | 0.923477 | -0.00063761  | -0.000362348 |
| last_minute_ratio    |  0.892265 | 0.923538 |  0.000700455 | -0.000422681 |
| total_clicks         |  0.892795 | 0.92375  |  0.000170571 | -0.000635319 |

## 4. Когорты

**Возрастные группы:**

| age_band   |     n |   completion_rate |   IMI_mean |   IMI_std |
|:-----------|------:|------------------:|-----------:|----------:|
| 0-35       | 20471 |          0.504665 |   0.683717 |  0.145615 |
| 35-55      |  8552 |          0.57507  |   0.726614 |  0.133214 |
| 55<=       |   205 |          0.64878  |   0.773731 |  0.12453  |

**Курсы (module × presentation):**

| code_module   | code_presentation   |    n |   completion_rate |   IMI_mean |
|:--------------|:--------------------|-----:|------------------:|-----------:|
| AAA           | 2013J               |  378 |          0.73545  |   0.696615 |
| AAA           | 2014J               |  357 |          0.708683 |   0.670476 |
| BBB           | 2013B               | 1537 |          0.522446 |   0.72432  |
| BBB           | 2013J               | 1870 |          0.573262 |   0.723578 |
| BBB           | 2014B               | 1294 |          0.561824 |   0.718403 |
| BBB           | 2014J               | 1921 |          0.598647 |   0.658184 |
| CCC           | 2014B               | 1681 |          0.394408 |   0.639136 |
| CCC           | 2014J               | 2302 |          0.440487 |   0.696065 |
| DDD           | 2013B               | 1214 |          0.420099 |   0.69277  |
| DDD           | 2013J               | 1768 |          0.468891 |   0.768648 |
| DDD           | 2014B               | 1116 |          0.429211 |   0.670884 |
| DDD           | 2014J               | 1647 |          0.480874 |   0.658188 |
| EEE           | 2013J               |  964 |          0.631743 |   0.729545 |
| EEE           | 2014B               |  624 |          0.572115 |   0.736415 |
| EEE           | 2014J               | 1097 |          0.623519 |   0.735186 |
| FFF           | 2013B               | 1510 |          0.517881 |   0.662408 |
| FFF           | 2013J               | 2098 |          0.521926 |   0.702971 |
| FFF           | 2014B               | 1363 |          0.479824 |   0.686501 |
| FFF           | 2014J               | 2121 |          0.526638 |   0.686846 |
| GGG           | 2013J               |  895 |          0.661453 |   0.732287 |
| GGG           | 2014B               |  773 |          0.61837  |   0.643676 |
| GGG           | 2014J               |  698 |          0.636103 |   0.725868 |

Графики: `cohorts/heatmap_completion.png`, `cohorts/heatmap_imi.png`.


## 5. Корреляция IMI_mean и completion_rate по курсам

```
Spearman rho = 0.298, p-value = 1.79e-01
```

График: `cohorts/imi_vs_completion_scatter.png`.


## 6. Короткие рекомендации

- Использовать порог из политики recall≥0.80 для раннего выявления рисковых студентов.
- Сфокусироваться на курсах из квадранта Low IMI / Low completion — запланировать мягкие nudges.
- По результатам ablation — работать с критичными признаками (увеличивать самоинициированную активность, снижать last-minute поведение и т. п.).
